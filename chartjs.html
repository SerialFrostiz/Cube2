<!DOCTYPE.html>
<html>
    <head>
         
        <meta charset="utf-8">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js" integrity="sha512-TW5s0IT/IppJtu76UbysrBH9Hy/5X41OTAbQuffZFU6lQ1rdcLHzpU5BzVvr/YFykoiMYZVWlr/PX1mDcfM9Qg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </head>
    <body>

       
        <div>
            <canvas id="myChart"></canvas>
          </div>

          
          
          <script>          
         $.getJSON('data.php', function (valeurs) {  
          
          
            
  
// On récupère les heures de nos entrées et on les stock pour l'axe
          const labels = [];
          for (let i = 0; i < valeurs.length; i++) {

            labels.push (valeurs[i].time);
}

// On récupère les datas de nos entrées
//humidite
const humidite = [];
          for (let i = 0; i < valeurs.length; i++) {

            humidite.push (valeurs[i].humidite);
}
//temperature
const temperature = [];
          for (let i = 0; i < valeurs.length; i++) {

            temperature.push (valeurs[i].temperature);
}


// On defini les constantes/options de notre graphique
          const data = {
            labels: labels,
            datasets: [
              {
              label: 'Température',
              backgroundColor: 'rgb(255, 99, 132)',
              borderColor: 'rgb(255, 99, 132)',
              data: temperature,
              },
              {
              label: 'Humidité',
              backgroundColor: 'rgb(255, 255, 132)',
              borderColor: 'rgb(255, 255, 132)',
              data: humidite,
              }
          ]
          };
        
          const config = {
            type: 'line',
            data: data,
            options: {}
          };

          const ctx = document.getElementById('myChart').getContext('2d'); 
          const myChart = new Chart(ctx,config);
        
         
                 
             console.log("succes");
             console.log(valeurs.length);
             for (let i = 0; i < valeurs.length; i++) {

                 console.log(valeurs[i].id_entry,valeurs[i].time,valeurs[i].id_sonde,valeurs[i].humidite,valeurs[i].temperature);
             }
                 });
         
        </script>
         
          
         
    </body>
</html>


    
